{% extends "base.html" %}
{% block title %}Cat치logo{% endblock %}

{% block content %}
<div class="container my-5">
  <h2 class="text-center mb-4">Cat치logo de Productos</h2>
  <div class="row g-4">
    {% for p in products %}
    <div class="col-md-3">
      <div class="card h-100 shadow-sm product-card">
        <!-- Imagen clickeable para ver detalle -->
        <a href="{{ url_for('product', pid=p.id_producto) }}">
          {% if p.foto_producto %}
            <img src="data:image/jpeg;base64,{{ p.foto_producto|b64encode }}" 
                 class="card-img-top" alt="{{ p.nombre }}">
          {% else %}
            <img src="/static/no-image.png" class="card-img-top" alt="Sin imagen">
          {% endif %}
        </a>

        <div class="card-body d-flex flex-column">
          <h5 class="card-title text-center">{{ p.nombre }}</h5>
          <p class="card-text text-muted small">{{ p.descripcion }}</p>
          <p class="price text-center fw-bold">${{ "%.2f"|format(p.precio_producto) }}</p>

          <!-- Formulario para a침adir al carrito -->
          <form action="{{ url_for('add_to_cart', product_id=p.id_producto) }}" method="POST" class="add-to-cart-form">
            <div class="d-flex justify-content-center gap-2 mb-2">
              <select name="talla" class="form-select form-select-sm" required>
                <option value="">Talla</option>
                <option value="S">S</option>
                <option value="M">M</option>
                <option value="L">L</option>
                <option value="XL">XL</option>
              </select>
              <select name="color" class="form-select form-select-sm" required>
                <option value="">Color</option>
                <option value="Negro">Negro</option>
                <option value="Blanco">Blanco</option>
                <option value="Azul">Azul</option>
                <option value="Rojo">Rojo</option>
              </select>
            </div>
            <button type="submit" class="btn btn-dark w-100">A침adir al carrito</button>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/catalog.css') }}">
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/catalog.js') }}"></script>
{% endblock %}
